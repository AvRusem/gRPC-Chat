# Проект: чат-сервер

## Общее описание проекта

Реализуй многопользовательский чат-сервер и консольный клиент, которые 
взаимодействуют между собой по протоколу gRPC.

## Базовая часть

### Сервер

Собирается из `./cmd/server`.

1. Сервер запускается с двумя аргументами: адресом прослушивания,
например `0.0.0.0:8080`, и именем файла, который содержит список
недопустимых цензурой слов или словосочетаний
2. В файле со списком запрещенных слов каждое запрещенное слово начинается
с отдельной строки
3. Сервер должен фильтровать отправляемые сообщения, и не пропускать в чат
те из них, которые содержат недопустимые цензурой слова
4. В случае, если пользователь отправляет сообщение с плохими словами
3 раза, то он банится: лишается возможности **писать** в чат, но может продолжать **читать** сообщения из чата
5. Отправлять сообщения в чат о подключении новых клиентов, их
отключении или изменении статуса **не нужно**.


### Клиент

Собирается из `./cmd/client`.

1. Клиент запускается с двумя аргументами: адресом подключения к серверу,
например `localhost:8080`, и именем пользователя
2. Взаимодействие с клиентом - текстовое, все сообщения и команды состоят из одной строки, и могут быть прочитаны методом `.ReadString('\n')` 
структуры `bufio.Reader`. Использовать пакет `term` **не нужно**, иначе
невозможно будет тестировать вашу программу в CI.
3. При появлении сообщения в чате, клиент должен отобразить его в формате:
```
[ИМЯ_ОТПРАВИТЕЛЯ]: ТЕКСТ СООБЩЕНИЯ
```
4. Строки, начинающиеся с символа `/` - это команды, отправлять в чат их не нужно
5. Команда `/exit` должна завершать работу клиента


### Сообщения об ошибках

Клиент должен выводить следующие тексты сообщений об ошибках:

1. При невозможности отправить сообщение, содержащее плохое слово:
```
ОШИБКА: Нельзя ругаться
```
2. В случае бана пользователя при попытке отправить сообщение:
```
ОШИБКА: Ты больше не можешь писать в этот чат
```


### Советы по реализации

1. Декомпозируй функциональность по разным пакетам. Ты можешь использовать
разные `.proto`-файлы для описания функциональности различных сервисов
2. Используй streaming-метод для получения сообщений от сервера 
в реальном времени
3. Не забывай про `sync.RWMutex` на сервере для защиты от гонки данных
4. На клиенте реализуй чтение строки от пользователя и чтение потока данных
от сервера в разных горутинах.

## Дополнительная часть

В бонусной части дополнительно необходимо предусмотреть авторизацию с 
использованием пароля, причём пользователи могут иметь разные роли.

### Генератор паролей

Дополнительно требуется реализовать утилиту `adduser` для создания
пользователей и паролей. Собирается из `./cmd/adduser`.

Формат запуска:
```
./adduser ФАЙЛ_С_ПАРОЛЯМИ ЛОГИН РОЛЬ ПАРОЛЬ
```

1. Формат хранение данных в файле с паролями реализуй на своё усмотрение
2. Логин - это имя пользователя, отображаемое в чате
3. Роль - это строка, определяющая права пользователя
4. Пароль передаётся как аргумент.

Обязательно храни пароли в файле криптографически стойким образом!
Запрещается хранить их простым текстом или с использованием быстро
вычислимых хеш-функций.

### Сервер

1. В отличие от базовой части, принимает дополнительный третий аргумент:
имя файла с паролями пользователей
2. Должен реализовать авторизацию пользователя по паролю
3. Без авторизации пользователи не могут ничего сделать
4. Пользователь с ролью `admin` может банить (переводить в режим только
для чтения) любых других пользователей чата
5. Проверка роли пользователя должна выполняться на стороне сервера.

### Клиент

1. В отличие от базовой части, принимает дополнительный третий аргумент:
пароль, используемый для авторизации
2. В случае неуспешной реализации клиент немедленно завершает свою работу
с кодом возврата, отличным от 0
3. Реализует дополнительную команду `/ban ЛОГИН_ЗЛОДЕЯ`, которая банит
другого пользователя чата
4. В случае, если пользователь не имеет роли `admin`, клиент должен
написать текст ошибки при попытке забанить другого пользователя:
```
ОШИБКА: Ты не администратор
```

### Советы по реализации

1. Используй gRPC-interceptors для реализации middleware-слоя с проверкой
прав доступа
2. Используй JWT-токен для передачи информации об авторизации
3. Хранение паролей можно реализовать с помощью `bcrypt`.
